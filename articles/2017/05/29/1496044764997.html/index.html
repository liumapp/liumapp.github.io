<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://www.liumapp.com').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="Hello,Maven 对于Maven的接触已经有很长的一段时间了，但是并没有做过系统的笔记，写这篇博文备忘一下。  Maven是什么Maven与Composer一样，是一个资源依赖包的管理工具。 更官方一点，它是一个基于POM（项目对象模型），可以通过一小段描述信息来管理项目的构建、报告和文档的软件项目管理工具。 Maven下载与配置下载请直接去Maven的官方站点下载源码 配置这里我们假设Ma">
<meta property="og:type" content="article">
<meta property="og:title" content="Hello,Maven">
<meta property="og:url" content="http://www.liumapp.com/articles/2017/05/29/1496044764997.html/index.html">
<meta property="og:site_name" content="liumapp">
<meta property="og:description" content="Hello,Maven 对于Maven的接触已经有很长的一段时间了，但是并没有做过系统的笔记，写这篇博文备忘一下。  Maven是什么Maven与Composer一样，是一个资源依赖包的管理工具。 更官方一点，它是一个基于POM（项目对象模型），可以通过一小段描述信息来管理项目的构建、报告和文档的软件项目管理工具。 Maven下载与配置下载请直接去Maven的官方站点下载源码 配置这里我们假设Ma">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2017-05-31T08:56:34.000Z">
<meta property="article:modified_time" content="2017-05-31T11:53:40.000Z">
<meta property="article:author" content="liumapp">
<meta property="article:tag" content="Maven">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://www.liumapp.com/articles/2017/05/29/1496044764997.html/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>Hello,Maven | liumapp</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">liumapp</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/liumapp" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.liumapp.com/articles/2017/05/29/1496044764997.html/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="liumapp">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="liumapp">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Hello,Maven
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2017-05-31 16:56:34 / 修改时间：19:53:40" itemprop="dateCreated datePublished" datetime="2017-05-31T16:56:34+08:00">2017-05-31</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Hello-Maven"><a href="#Hello-Maven" class="headerlink" title="Hello,Maven"></a>Hello,Maven</h1><blockquote>
<p>对于Maven的接触已经有很长的一段时间了，但是并没有做过系统的笔记，写这篇博文备忘一下。</p>
</blockquote>
<h2 id="Maven是什么"><a href="#Maven是什么" class="headerlink" title="Maven是什么"></a>Maven是什么</h2><p>Maven与Composer一样，是一个资源依赖包的管理工具。</p>
<p>更官方一点，它是一个基于POM（项目对象模型），可以通过一小段描述信息来管理项目的构建、报告和文档的软件项目管理工具。</p>
<h2 id="Maven下载与配置"><a href="#Maven下载与配置" class="headerlink" title="Maven下载与配置"></a>Maven下载与配置</h2><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p>请直接去Maven的官方站点下载源码</p>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>这里我们假设Maven的目录位于/usr/local/maven（附：类Unix系统），并且您的系统已经具有Java环境。</p>
<p>那么在执行如下操作：</p>
<pre><code>cd ~

vim .bash_profile</code></pre><p>.bash_profile下新增如下两行代码：</p>
<pre><code>export M2_HOME=/usr/local/maven3.3.9/

export PATH=/usr/local/maven3.3.9/bin/:$PATH</code></pre><p>再执行</p>
<pre><code>source .bash_profile</code></pre><p>测试</p>
<p>  mvn -v</p>
<p>如果看见下列信息：</p>
<pre><code>Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-11T00:41:47+08:00)

Maven home: /usr/local/maven3.3.9

Java version: 1.8.0_112, vendor: Oracle Corporation

Java home: /Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/Home/jre

Default locale: zh_CN, platform encoding: UTF-8</code></pre><p>那就说明您对Maven的配置已经完成了。</p>
<pre><code>OS name: &quot;mac os x&quot;, version: &quot;10.11.6&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot;</code></pre><h2 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h2><h3 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h3><p>源码请看我的项目<a href="https://github.com/liumapp/java-core-learn.git" target="_blank" rel="noopener">java-core-learn</a></p>
<h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><pre><code>--src
  --main
    --java（在这个目录下写java代码）
      --org
        --javacore
          --base
            --具体java文件
    --resources（资源文件）
  --test
    --base
      --具体java文件</code></pre><h3 id="maven配置文件pom-xml"><a href="#maven配置文件pom-xml" class="headerlink" title="maven配置文件pom.xml"></a>maven配置文件pom.xml</h3><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; 

    &lt;groupId&gt;org.javacore&lt;/groupId&gt;
    &lt;artifactId&gt;java-core-learn&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;

    &lt;name&gt;java core learning example&lt;/name&gt;
    &lt;url&gt;http://www.liumapp.com&lt;url&gt;
    &lt;description&gt;java core learning example&lt;/description&gt;
    &lt;packaging&gt;war&lt;/packaging&gt;
    &lt;developers&gt;
        &lt;developer&gt;
            &lt;name&gt;liumapp&lt;/name&gt;
        &lt;/developer&gt;
    &lt;/developers&gt;

    &lt;properties&gt;
        &lt;google-collections.version&gt;1.0&lt;/google-collections.version&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.google.collections&lt;/groupId&gt;
            &lt;artifactId&gt;google-collections&lt;/artifactId&gt;
            &lt;version&gt;${google-collections.version}&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
            &lt;version&gt;1.16.8&lt;/version&gt;
            &lt;scope&gt;provided&lt;/scope&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;junit&lt;/groupId&gt;
            &lt;artifactId&gt;junit&lt;/artifactId&gt;
            &lt;version&gt;4.12&lt;/version&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                    &lt;source&gt;1.8&lt;/source&gt;
                    &lt;target&gt;1.8&lt;/target&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;</code></pre><h4 id="pom-xml分析"><a href="#pom-xml分析" class="headerlink" title="pom.xml分析"></a>pom.xml分析</h4><pre><code>&lt;xml&gt;标签、&lt;modelVersion&gt;标签和&lt;project&gt;标签是pom的固定结构，我们不需要进行变化。

&lt;groupId&gt;的值就是项目的包名,一般而言，都是按照“组织名＋公司网址的反写＋项目名”这样的格式来填写，比如说我的网址liumapp.com，我要创建一个helloworld项目，那么包名就应该是com.liumapp.helloworld

&lt;artifactId&gt;的值是模块名，一般使用项目名称＋模块名进行标识

&lt;version&gt;表示版本号，比如0.0.1snapshot，第一个0表示大版本号，第二个0表示分支版本号，第三个0表示小版本号，snapshot表示快照版本、alpha表示内侧版本、beta表示公测版本、Release表示稳定版本、GA表示正式发布版本。

&lt;packaging&gt;打包方式，默认是jar（不写这个标签的时候打包成jar），可以使用war、zip、pom等等。

&lt;dependencies&gt;项目的依赖，经常使用到。&lt;dependency&gt;下面有一个&lt;scope&gt;&lt;/scope&gt;，它表示依赖的范围。比如&lt;scope&gt;test&lt;/scope&gt;，那么就说明这个依赖只在测试的范围内有用，超出这个范围去使用就会报错。scope标签的值一共有六种，分别是：compile、provided、runtime、test、system、import。
compile是默认的节点，它表示编译测试和运行都有效。
provided是在测试和编译的时候有效。比如说Servlet的API，在测试和编译的时候有效，但如果在运行的时候，就会和tomcat的servlet发生冲突。
runtime表示在测试和运行时有效。比如jdbc的驱动。
test表示只在测试的时候有效。比如junit
system表示编译和测试时有效，但有很大的不可移植性，只能本地使用。
import表示导入的范围，它只使用在dependencyManagement中，表示从其他的pom中导入dependency的配置。

&lt;dependency&gt;下面还有一个&lt;optional&gt;true/false&lt;optional&gt;默认为false，表示设置依赖是否可选。如果为false，表示这个依赖是可以继承的，如果为true，则这个子项目必须显示引入该依赖。

&lt;dependency&gt;下面还有一个&lt;exclusions&gt;，它表示一个排除依赖传递的列表。比如说Ajar包依赖Bjar包，Bjar包依赖Cjar包，那么C对于A来说，就是一个传递依赖，如果A不想依赖C，就可以在这里面进行声明。排除对C的依赖关系。
这里我很喜欢别人举的一个例子来解释依赖传递，在古惑仔里面，山鸡跟楠哥混，楠哥跟B哥混，所以山鸡就间接的跟B哥混，所以山鸡跟B哥之间的关系，就是一个依赖传递的关系。那如果有一天，山鸡跟楠哥表忠心，说我只听你的，不听B哥的，那么山鸡这个项目里，在依赖楠哥的时候，还要再加一条对B哥的排除依赖。

&lt;dependencyManagement&gt;&lt;/dependencyManagement&gt;表示依赖的管理。这个标签里面也是写dependencies和dependency，但是这里面的依赖并不会被实际的引用。

&lt;build&gt;为构建行为提供支持，比如说使用maven的相关插件。

&lt;parent&gt;通常用于子模块中对父模块pom.xml的继承

&lt;modules&gt;定义多个模块然后一起编译。

&lt;name&gt;表示项目的描述名，一般用于在生成项目文档的时候使用。

&lt;url&gt;项目的地址。

&lt;description&gt;项目描述

&lt;developers&gt;项目开发人员列表

&lt;license&gt;

&lt;organization&gt;</code></pre><h4 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h4><p>进入项目目录后，运行</p>
<pre><code>mvn compile</code></pre><p>maven会自动下载依赖的项目，并且完成编译。</p>
<p>再运行</p>
<pre><code>mvn test </code></pre><p>maven会自动的运行我们写在test目录下的测试用例。</p>
<p>再运行</p>
<pre><code>mvn package</code></pre><p>maven会自动对我们的项目进行编译后的打包</p>
<h4 id="maven生成的文件"><a href="#maven生成的文件" class="headerlink" title="maven生成的文件"></a>maven生成的文件</h4><p>运行完上述说的命令后，项目根目录下应该会出现如下所示的目录</p>
<p>–target<br>  –classes //编译后的文件<br>  –maven-status<br>  –surefire-reports//存放测试报告<br>  –test-classes</p>
<h2 id="Maven中的坐标和仓库"><a href="#Maven中的坐标和仓库" class="headerlink" title="Maven中的坐标和仓库"></a>Maven中的坐标和仓库</h2><h3 id="坐标与构件"><a href="#坐标与构件" class="headerlink" title="坐标与构件"></a>坐标与构件</h3><p>构件：maven中，任何一个依赖，插件，项目构建的输出都可以被称之为构件。</p>
<p>构件通过坐标作为其唯一标识。</p>
<p>而坐标呢，则是由pom.xml文件中的groupId 、artifactId 和 version来组成。</p>
<h3 id="仓库"><a href="#仓库" class="headerlink" title="仓库"></a>仓库</h3><p>仓库分为本地仓库和远程仓库。</p>
<p>maven在安装依赖之前，会先去本地的maven仓库中查找是否有相同的依赖，如果有，则不会去网上下载，直接使用本地的依赖，如果没有，再去网上进行下载。这里的网上，则是指的maven的远程仓库。</p>
<p>一般而言，maven默认的会给我们一个远程仓库地址：<a href="https://repo.maven.apache.org/maven2" target="_blank" rel="noopener">https://repo.maven.apache.org/maven2</a></p>
<p>这个地址我们可以在maven项目源码里面的org\apache\maven\model\pom-4.0.0.xml这个文件里面找到。(被命名为：Central Repository，中央仓库)</p>
<h3 id="镜像仓库"><a href="#镜像仓库" class="headerlink" title="镜像仓库"></a>镜像仓库</h3><p>maven的中央仓库位置在国外，可能有些时候访问无法成功，这个时候我们就需要使用maven在国内的镜像仓库。</p>
<h4 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h4><p>进入本地maven项目目录，进入conf目录，打开settings.xml文件</p>
<p>大概在146行左右的样子，找到mirrors标签。添加如下代码：</p>
<pre><code>&lt;mirror&gt;
  &lt;id&gt;maven.net.cn&lt;/id&gt;
  &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;
  &lt;name&gt;central mirror in china&lt;/name&gt;
  &lt;url&gt;http://maven.net.cn/content/groups/public/&lt;/url&gt;
&lt;/mirror&gt;</code></pre><p>保存后退出即可。</p>
<p>当然国内的话，还是阿里云的要快一点，所以我们可以使用这个地址：<a href="http://maven.aliyun.com/nexus/content/groups/public/" target="_blank" rel="noopener">http://maven.aliyun.com/nexus/content/groups/public/</a></p>
<h3 id="更改仓库位置"><a href="#更改仓库位置" class="headerlink" title="更改仓库位置"></a>更改仓库位置</h3><h4 id="默认位置"><a href="#默认位置" class="headerlink" title="默认位置"></a>默认位置</h4><p>默认情况下，maven安装的依赖都位于如下地址：</p>
<pre><code>cd ~/.m2/repository</code></pre><h4 id="更改方法"><a href="#更改方法" class="headerlink" title="更改方法"></a>更改方法</h4><p>依然在settings.xml文件中，我们找到第55行左右的<localRepository>标签，然后输入新的地址即可。</p>
<pre><code>&lt;localRepository&gt;/path/to/repository&lt;/localRepository&gt;</code></pre><h2 id="Maven的生命周期"><a href="#Maven的生命周期" class="headerlink" title="Maven的生命周期"></a>Maven的生命周期</h2><p>完整的项目构建过程包括：清理、编译、测试、打包、集成测试、验证、部署。</p>
<p>Maven生命周期：</p>
<pre><code>clean 清理项目
    pre-clean 执行清理前的工作
    clean 清理上一次构建生成的所有文件
    post-clean 执行清理后的文件

default 构建项目（最核心的一部分）
    compile、test、package、install等等。

site 生成项目站点
    pre-site 在生成项目站点前要完成的工作
    site 生成项目的站点文档
    post-site 在生成项目站点后要完成的工作
    site-deploy 发布生成的站点到服务器上

在这几个clean、compile、test、package、install命令中，当我们运行package的时候，clean、compile、test将会在在package之前依次运行。</code></pre><h2 id="Maven的插件"><a href="#Maven的插件" class="headerlink" title="Maven的插件"></a>Maven的插件</h2><p>官方插件列表：<a href="http://maven.apache.org/plugins/" target="_blank" rel="noopener">http://maven.apache.org/plugins/</a></p>
<h3 id="对source插件的使用"><a href="#对source插件的使用" class="headerlink" title="对source插件的使用"></a>对source插件的使用</h3><p>source插件：将项目的源码进行打包</p>
<p>在pom.xml文件的project节点内添加如下代码：</p>
<pre><code>&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;
      &lt;version&gt;2.4&lt;/version&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;phase&gt;package&lt;/phase&gt;
          &lt;goals&gt;
            &lt;goal&gt;jar-no-fork&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;</code></pre><p>上面代码中的executions节点，用来绑定插件source到maven的package生命周期中。</p>
<p>goal目标节点的内容，可以在插件详情里面查看。</p>
<p>接下来运行package即可。</p>
<h2 id="依赖冲突"><a href="#依赖冲突" class="headerlink" title="依赖冲突"></a>依赖冲突</h2><p>比如说，我现在的项目为A，A依赖B项目，A也依赖C项目，B项目和C项目都依赖一个D项目，但是呢，B项目依赖D的1.0版本，而C项目依赖D的2.0版本，那这个时候怎么办呢。</p>
<h3 id="短路优先"><a href="#短路优先" class="headerlink" title="短路优先"></a>短路优先</h3><p>在maven中，首先要遵循短路优先原则。意思就是，优先解析路径短的版本。比如A依赖B，B依赖C，C依赖X（jar，2.0版本），然后又有A依赖D，D依赖X（jar，1.0版本），那么最后maven会优先解析X的1.0版本。</p>
<h3 id="先声明先优先"><a href="#先声明先优先" class="headerlink" title="先声明先优先"></a>先声明先优先</h3><p>如果路径长度相同，则原先声明，先解析谁。</p>
<h2 id="聚合和继承"><a href="#聚合和继承" class="headerlink" title="聚合和继承"></a>聚合和继承</h2><h3 id="聚合"><a href="#聚合" class="headerlink" title="聚合"></a>聚合</h3><p>在maven中，如果想将多个项目进行install，将其安装到本地仓库中，必须对其依次执行install操作。maven中有一种方式，可以将其放到一起运行，这种方式称之为聚合。</p>
<p>具体使用方法：</p>
<ul>
<li><p>首先我们需要新建一个项目，然后将项目的打包方式修改为pom，也就是把packaging元素的值设定为pom</p>
</li>
<li><p>然后在pom.xml文件中，添加如下代码：</p>
<pre><code>&lt;modules&gt;
    &lt;module&gt;/path/to/your/moduleA&lt;/module&gt;
    &lt;module&gt;/path/to/your/moduleB&lt;/module&gt;
    &lt;module&gt;/path/to/your/moduleC&lt;/module&gt;
&lt;/modules&gt;</code></pre></li>
<li><p>再在这个项目的目录下运行mvn install 即可。</p>
</li>
</ul>
<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p>基本上不管哪一个maven项目，都会用到junit，而且每一个项目的pom.xml文件，都会对其进行配置。这个时候就会出现很多重复的配置代码。</p>
<p>所以在maven中，我们可以像java一样，将共用的部分，写成一个父类。</p>
<p>具体使用方法：</p>
<ul>
<li><p>新建一个maven项目（假设命名为parent），packaging改为pom，将要写入的依赖，写在dependencyManagement中。如下所示：</p>
<pre><code>&lt;properties&gt;
    &lt;junit.version&gt;4.12&lt;/junit.version&gt;
&lt;/properties&gt;

&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;junit&lt;/groupId&gt;
            &lt;artifactId&gt;junit&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
            &lt;version&gt;${junit.version}&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;</code></pre></li>
<li><p>在其他的maven项目中，去继承parent。代码如下所示：<br>  在pom.xml文件中：</p>
</li>
</ul>
<pre><code>    &lt;parent&gt;
      &lt;groupId&gt;parent的groupId&lt;/groupId&gt;
      &lt;artifactId&gt;parent的artifactId&lt;/artifactId&gt;=
      &lt;version&gt;parent的version&lt;/version&gt;
    &lt;/parent&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;junit&lt;/groupId&gt;
            &lt;artifactId&gt;junit&lt;/artifactId&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

如上所示，继承parent之后，再引用junit，已经不需要进行过多的配置了，只需要定义它的坐标即可。</code></pre><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><pre><code>mvn -v 查看maven版本
    -compile 编译整个项目
    -test 执行test下面的测试代码
    -package 打包
    -clean 删除编译后的字节码文件和测试报告等等，也就是删除target
    -install 安装jar包到本地仓库中</code></pre><p>在使用命令的时候，可以多个命令按照顺序使用，如：</p>
<pre><code>mvn clean compile</code></pre><p>就表示先clean，再compile</p>
<h2 id="自动创建目录骨架"><a href="#自动创建目录骨架" class="headerlink" title="自动创建目录骨架"></a>自动创建目录骨架</h2><p>使用archetype插件，用于创建符合maven规定的目录骨架，具体代码如下：</p>
<pre><code>mvn archetype:generate</code></pre><p>如果是第一次运行的话，maven会自动的下载相关依赖，同时我们还要进行版本的选择。一般选择第六个就可以了。</p>
<p>之后，会要求我们输入groupId，这里按照自己想要的项目包名输入。</p>
<p>然后是artifactId，输入项目名即可。</p>
<p>然后是version，版本号，一般第一次执行都是1.0.0SNAPSHOT</p>
<p>再是package,包名，输入项目包名再加一个-service即可。</p>
<p>最后进行确认整个项目的骨架就自动创建好了。</p>
<p>当然我们也可以直接使用一条命令完成整个过程：</p>
<pre><code>mvn archetype:generate -DgroupId=yourGroupId -DartifactId=yourArtifactId -Dversion=1.0.0SNAPSHOT -Dpackage=yourPackage</code></pre><h2 id="利用maven发布web项目"><a href="#利用maven发布web项目" class="headerlink" title="利用maven发布web项目"></a>利用maven发布web项目</h2><p>相关源码可以看我的项目 <a href="https://github.com/liumapp/jsp-basic" target="_blank" rel="noopener">jsp-basic</a></p>
<ul>
<li><p>利用插件创建项目</p>
</li>
<li><p>添加对servlet的依赖，具体坐标请前往官网查找（很多依赖我们都需要在官网上去找）。这里推荐：<a href="http://mvnrepository.com/" target="_blank" rel="noopener">http://mvnrepository.com/</a></p>
</li>
<li><p>设定servlet的依赖scope值为provided。</p>
</li>
<li><p>packaging设定为war</p>
</li>
<li><p>添加maven的jetty插件。</p>
</li>
<li><p>执行mvn compiler，接下来就能够在浏览器成功访问到项目。</p>
</li>
<li><p>如果要使用tomcat作为web容器，那么就是用tomcat对maven的插件来取代jetty即可。</p>
</li>
</ul>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>请注意，maven在安装依赖之前，会先去本地的maven仓库中查找是否有相同的依赖，如果有，则不会去网上下载，直接使用本地的依赖，如果没有，再去网上进行下载。<br>另外需要注意的是，如果我们有两个项目A和项目B，项目B需要引用项目A的类的话，通过maven，我们只需要在项目A中执行命令mvn -install ，这样将会把A保存在本地仓库中，接下来再到项目B的pom.xml文件中添加对A的dependency，再执行compaile，maven就能够自动的下载A的依赖。</p>
<p>在maven中，有三种classpath：编译、测试和运行。</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Maven/" rel="tag"># Maven</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/articles/2017/05/26/1495785636018.html/" rel="prev" title="whmcs-addon-module之新闻批量上传">
      <i class="fa fa-chevron-left"></i> whmcs-addon-module之新闻批量上传
    </a></div>
      <div class="post-nav-item">
    <a href="/articles/2017/06/01/1496286037699.html/" rel="next" title="限制Nginx日志文件大小">
      限制Nginx日志文件大小 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Hello-Maven"><span class="nav-number">1.</span> <span class="nav-text">Hello,Maven</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Maven是什么"><span class="nav-number">1.1.</span> <span class="nav-text">Maven是什么</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Maven下载与配置"><span class="nav-number">1.2.</span> <span class="nav-text">Maven下载与配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#下载"><span class="nav-number">1.2.1.</span> <span class="nav-text">下载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#配置"><span class="nav-number">1.2.2.</span> <span class="nav-text">配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#案例"><span class="nav-number">1.3.</span> <span class="nav-text">案例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#源码"><span class="nav-number">1.3.1.</span> <span class="nav-text">源码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#目录结构"><span class="nav-number">1.3.2.</span> <span class="nav-text">目录结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#maven配置文件pom-xml"><span class="nav-number">1.3.3.</span> <span class="nav-text">maven配置文件pom.xml</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#代码"><span class="nav-number">1.3.3.1.</span> <span class="nav-text">代码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#pom-xml分析"><span class="nav-number">1.3.3.2.</span> <span class="nav-text">pom.xml分析</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#运行"><span class="nav-number">1.3.3.3.</span> <span class="nav-text">运行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#maven生成的文件"><span class="nav-number">1.3.3.4.</span> <span class="nav-text">maven生成的文件</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Maven中的坐标和仓库"><span class="nav-number">1.4.</span> <span class="nav-text">Maven中的坐标和仓库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#坐标与构件"><span class="nav-number">1.4.1.</span> <span class="nav-text">坐标与构件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#仓库"><span class="nav-number">1.4.2.</span> <span class="nav-text">仓库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#镜像仓库"><span class="nav-number">1.4.3.</span> <span class="nav-text">镜像仓库</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#使用方法"><span class="nav-number">1.4.3.1.</span> <span class="nav-text">使用方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#更改仓库位置"><span class="nav-number">1.4.4.</span> <span class="nav-text">更改仓库位置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#默认位置"><span class="nav-number">1.4.4.1.</span> <span class="nav-text">默认位置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#更改方法"><span class="nav-number">1.4.4.2.</span> <span class="nav-text">更改方法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Maven的生命周期"><span class="nav-number">1.5.</span> <span class="nav-text">Maven的生命周期</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Maven的插件"><span class="nav-number">1.6.</span> <span class="nav-text">Maven的插件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#对source插件的使用"><span class="nav-number">1.6.1.</span> <span class="nav-text">对source插件的使用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#依赖冲突"><span class="nav-number">1.7.</span> <span class="nav-text">依赖冲突</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#短路优先"><span class="nav-number">1.7.1.</span> <span class="nav-text">短路优先</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#先声明先优先"><span class="nav-number">1.7.2.</span> <span class="nav-text">先声明先优先</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#聚合和继承"><span class="nav-number">1.8.</span> <span class="nav-text">聚合和继承</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#聚合"><span class="nav-number">1.8.1.</span> <span class="nav-text">聚合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#继承"><span class="nav-number">1.8.2.</span> <span class="nav-text">继承</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#常用命令"><span class="nav-number">1.9.</span> <span class="nav-text">常用命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自动创建目录骨架"><span class="nav-number">1.10.</span> <span class="nav-text">自动创建目录骨架</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#利用maven发布web项目"><span class="nav-number">1.11.</span> <span class="nav-text">利用maven发布web项目</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#注意事项"><span class="nav-number">1.12.</span> <span class="nav-text">注意事项</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">liumapp</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">165</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">88</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">liumapp.com@gmail.com</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.7.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
